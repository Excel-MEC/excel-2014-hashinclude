(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}var r=t(["and","or","not","is","in"]);var n=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"];var i=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];var a={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]};var o={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};e.registerHelper("hintWords","python",n.concat(i));function l(e){return e.scopes[e.scopes.length-1]}e.defineMode("python",function(s,f){var u="error";var c=f.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]");var p=f.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]");var d=f.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))");var m=f.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))");var h=f.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))");var y=f.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*");var b=f.hangingIndent||s.indentUnit;var v=n,g=i;if(f.extra_keywords!=undefined){v=v.concat(f.extra_keywords)}if(f.extra_builtins!=undefined){g=g.concat(f.extra_builtins)}if(f.version&&parseInt(f.version,10)==3){v=v.concat(o.keywords);g=g.concat(o.builtins);var x=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{v=v.concat(a.keywords);g=g.concat(a.builtins);var x=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var k=t(v);var w=t(g);function E(e,t){if(e.sol()&&l(t).type=="py"){var r=l(t).offset;if(e.eatSpace()){var n=e.indentation();if(n>r)S(e,t,"py");else if(n<r&&T(e,t))t.errorToken=true;return null}else{var i=_(e,t);if(r>0&&T(e,t))i+=" "+u;return i}}return _(e,t)}function _(e,t){if(e.eatSpace())return null;var n=e.peek();if(n=="#"){e.skipToEnd();return"comment"}if(e.match(/^[0-9\.]/,false)){var i=false;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)){i=true}if(e.match(/^\d+\.\d*/)){i=true}if(e.match(/^\.\d+/)){i=true}if(i){e.eat(/J/i);return"number"}var a=false;if(e.match(/^0x[0-9a-f]+/i))a=true;if(e.match(/^0b[01]+/i))a=true;if(e.match(/^0o[0-7]+/i))a=true;if(e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){e.eat(/J/i);a=true}if(e.match(/^0(?![\dx])/i))a=true;if(a){e.eat(/L/i);return"number"}}if(e.match(x)){t.tokenize=z(e.current());return t.tokenize(e,t)}if(e.match(h)||e.match(m))return null;if(e.match(d)||e.match(c)||e.match(r))return"operator";if(e.match(p))return null;if(e.match(k))return"keyword";if(e.match(w))return"builtin";if(e.match(/^(self|cls)\b/))return"variable-2";if(e.match(y)){if(t.lastToken=="def"||t.lastToken=="class")return"def";return"variable"}e.next();return u}function z(e){while("rub".indexOf(e.charAt(0).toLowerCase())>=0)e=e.substr(1);var t=e.length==1;var r="string";function n(n,i){while(!n.eol()){n.eatWhile(/[^'"\\]/);if(n.eat("\\")){n.next();if(t&&n.eol())return r}else if(n.match(e)){i.tokenize=E;return r}else{n.eat(/['"]/)}}if(t){if(f.singleLineStringErrors)return u;else i.tokenize=E}return r}n.isString=true;return n}function S(e,t,r){var n=0,i=null;if(r=="py"){while(l(t).type!="py")t.scopes.pop()}n=l(t).offset+(r=="py"?s.indentUnit:b);if(r!="py"&&!e.match(/^(\s|#.*)*$/,false))i=e.column()+1;t.scopes.push({offset:n,type:r,align:i})}function T(e,t){var r=e.indentation();while(l(t).offset>r){if(l(t).type!="py")return true;t.scopes.pop()}return l(t).offset!=r}function R(e,t){var r=t.tokenize(e,t);var n=e.current();if(n=="."){r=e.match(y,false)?null:u;if(r==null&&t.lastStyle=="meta"){r="meta"}return r}if(n=="@")return e.match(y,false)?"meta":u;if((r=="variable"||r=="builtin")&&t.lastStyle=="meta")r="meta";if(n=="pass"||n=="return")t.dedent+=1;if(n=="lambda")t.lambda=true;if(n==":"&&!t.lambda&&l(t).type=="py")S(e,t,"py");var i=n.length==1?"[({".indexOf(n):-1;if(i!=-1)S(e,t,"])}".slice(i,i+1));i="])}".indexOf(n);if(i!=-1){if(l(t).type==n)t.scopes.pop();else return u}if(t.dedent>0&&e.eol()&&l(t).type=="py"){if(t.scopes.length>1)t.scopes.pop();t.dedent-=1}return r}var I={startState:function(e){return{tokenize:E,scopes:[{offset:e||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:false,dedent:0}},token:function(e,t){var r=t.errorToken;if(r)t.errorToken=false;var n=R(e,t);t.lastStyle=n;var i=e.current();if(i&&n)t.lastToken=i;if(e.eol()&&t.lambda)t.lambda=false;return r?n+" "+u:n},indent:function(t,r){if(t.tokenize!=E)return t.tokenize.isString?e.Pass:0;var n=l(t);var i=r&&r.charAt(0)==n.type;if(n.align!=null)return n.align-(i?1:0);else if(i&&t.scopes.length>1)return t.scopes[t.scopes.length-2].offset;else return n.offset},lineComment:"#",fold:"indent"};return I});e.defineMIME("text/x-python","python");var s=function(e){return e.split(" ")};e.defineMIME("text/x-cython",{name:"python",extra_keywords:s("by cdef cimport cpdef ctypedef enum except"+"extern gil include nogil property public"+"readonly struct union DEF IF ELIF ELSE")})});
(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.registerHelper("fold","markdown",function(n,r){var t=100;function i(r){var t=n.getTokenTypeAt(e.Pos(r,0));return t&&/\bheader\b/.test(t)}function o(e,n,r){var o=n&&n.match(/^#+/);if(o&&i(e))return o[0].length;o=r&&r.match(/^[=\-]+\s*$/);if(o&&i(e+1))return r[0]=="="?1:2;return t}var f=n.getLine(r.line),l=n.getLine(r.line+1);var u=o(r.line,f,l);if(u===t)return undefined;var a=n.lastLine();var c=r.line,d=n.getLine(c+2);while(c<a){if(o(c+1,l,d)<=u)break;++c;l=d;d=n.getLine(c+2)}return{from:e.Pos(r.line,f.length),to:e.Pos(c,n.getLine(c).length)}})});
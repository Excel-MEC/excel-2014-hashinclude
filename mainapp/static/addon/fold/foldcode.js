(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";function n(n,r,t,f){if(t&&t.call){var l=t;t=null}else{var l=i(n,t,"rangeFinder")}if(typeof r=="number")r=e.Pos(r,0);var d=i(n,t,"minFoldSize");function u(e){var o=l(n,r);if(!o||o.to.line-o.from.line<d)return null;var i=n.findMarksAt(o.from);for(var t=0;t<i.length;++t){if(i[t].__isFold&&f!=="fold"){if(!e)return null;o.cleared=true;i[t].clear()}}return o}var a=u(true);if(i(n,t,"scanUp"))while(!a&&r.line>n.firstLine()){r=e.Pos(r.line-1,0);a=u(false)}if(!a||a.cleared||f==="unfold")return;var c=o(n,t);e.on(c,"mousedown",function(n){s.clear();e.e_preventDefault(n)});var s=n.markText(a.from,a.to,{replacedWith:c,clearOnEnter:true,__isFold:true});s.on("clear",function(o,r){e.signal(n,"unfold",n,o,r)});e.signal(n,"fold",n,a.from,a.to)}function o(e,n){var o=i(e,n,"widget");if(typeof o=="string"){var r=document.createTextNode(o);o=document.createElement("span");o.appendChild(r);o.className="CodeMirror-foldmarker"}return o}e.newFoldFunction=function(e,o){return function(r,i){n(r,i,{rangeFinder:e,widget:o})}};e.defineExtension("foldCode",function(e,o,r){n(this,e,o,r)});e.defineExtension("isFolded",function(e){var n=this.findMarksAt(e);for(var o=0;o<n.length;++o)if(n[o].__isFold)return true});e.commands.toggleFold=function(e){e.foldCode(e.getCursor())};e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")};e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")};e.commands.foldAll=function(n){n.operation(function(){for(var o=n.firstLine(),r=n.lastLine();o<=r;o++)n.foldCode(e.Pos(o,0),null,"fold")})};e.commands.unfoldAll=function(n){n.operation(function(){for(var o=n.firstLine(),r=n.lastLine();o<=r;o++)n.foldCode(e.Pos(o,0),null,"unfold")})};e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(n,o){for(var r=0;r<e.length;++r){var i=e[r](n,o);if(i)return i}}});e.registerHelper("fold","auto",function(e,n){var o=e.getHelpers(n,"fold");for(var r=0;r<o.length;r++){var i=o[r](e,n);if(i)return i}});var r={rangeFinder:e.fold.auto,widget:"â†”",minFoldSize:0,scanUp:false};e.defineOption("foldOptions",null);function i(e,n,o){if(n&&n[o]!==undefined)return n[o];var i=e.options.foldOptions;if(i&&i[o]!==undefined)return i[o];return r[o]}});
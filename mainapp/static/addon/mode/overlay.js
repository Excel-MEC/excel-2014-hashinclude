(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.overlayMode=function(o,r,n){return{startState:function(){return{base:e.startState(o),overlay:e.startState(r),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,lineSeen:null}},copyState:function(n){return{base:e.copyState(o,n.base),overlay:e.copyState(r,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(e,a){if(e.sol()||e.string!=a.lineSeen||Math.min(a.basePos,a.overlayPos)<e.start){a.lineSeen=e.string;a.basePos=a.overlayPos=e.start}if(e.start==a.basePos){a.baseCur=o.token(e,a.base);a.basePos=e.pos}if(e.start==a.overlayPos){e.pos=e.start;a.overlayCur=r.token(e,a.overlay);a.overlayPos=e.pos}e.pos=Math.min(a.basePos,a.overlayPos);if(a.overlayCur==null)return a.baseCur;else if(a.baseCur!=null&&a.overlay.combineTokens||n&&a.overlay.combineTokens==null)return a.baseCur+" "+a.overlayCur;else return a.overlayCur},indent:o.indent&&function(e,r){return o.indent(e.base,r)},electricChars:o.electricChars,innerMode:function(e){return{state:e.base,mode:o}},blankLine:function(e){if(o.blankLine)o.blankLine(e.base);if(r.blankLine)r.blankLine(e.overlay)}}}});
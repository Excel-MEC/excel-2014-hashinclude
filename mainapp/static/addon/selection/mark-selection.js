(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineOption("styleSelectedText",false,function(i,n,o){var l=o&&o!=e.Init;if(n&&!l){i.state.markedSelection=[];i.state.markedSelectionStyle=typeof n=="string"?n:"CodeMirror-selectedtext";a(i);i.on("cursorActivity",t);i.on("change",r)}else if(!n&&l){i.off("cursorActivity",t);i.off("change",r);f(i);i.state.markedSelection=i.state.markedSelectionStyle=null}});function t(e){e.operation(function(){c(e)})}function r(e){if(e.state.markedSelection.length)e.operation(function(){f(e)})}var i=8;var n=e.Pos;var o=e.cmpPos;function l(e,t,r,l){if(o(t,r)==0)return;var f=e.state.markedSelection;var a=e.state.markedSelectionStyle;for(var c=t.line;;){var s=c==t.line?t:n(c,0);var d=c+i,u=d>=r.line;var m=u?r:n(d,0);var v=e.markText(s,m,{className:a});if(l==null)f.push(v);else f.splice(l++,0,v);if(u)break;c=d}}function f(e){var t=e.state.markedSelection;for(var r=0;r<t.length;++r)t[r].clear();t.length=0}function a(e){f(e);var t=e.listSelections();for(var r=0;r<t.length;r++)l(e,t[r].from(),t[r].to())}function c(e){if(!e.somethingSelected())return f(e);if(e.listSelections().length>1)return a(e);var t=e.getCursor("start"),r=e.getCursor("end");var n=e.state.markedSelection;if(!n.length)return l(e,t,r);var c=n[0].find(),s=n[n.length-1].find();if(!c||!s||r.line-t.line<i||o(t,s.to)>=0||o(r,c.from)<=0)return a(e);while(o(t,c.from)>0){n.shift().clear();c=n[0].find()}if(o(t,c.from)<0){if(c.to.line-t.line<i){n.shift().clear();l(e,t,c.to,0)}else{l(e,t,c.from,0)}}while(o(r,s.to)<0){n.pop().clear();s=n[n.length-1].find()}if(o(r,s.to)>0){if(r.line-s.from.line<i){n.pop().clear();l(e,s.from,r)}else{l(e,s.to,r)}}}});
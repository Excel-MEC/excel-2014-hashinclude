(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){var n=["clike","css","javascript"];for(var t=0;t<n.length;++t)e.extendMode(n[t],{blockCommentContinue:" * "});function o(n){if(n.getOption("disableInput"))return e.Pass;var t=n.listSelections(),o,r=[];for(var l=0;l<t.length;l++){var f=t[l].head,m=n.getTokenAt(f);if(m.type!="comment")return e.Pass;var s=e.innerMode(n.getMode(),m.state).mode;if(!o)o=s;else if(o!=s)return e.Pass;var a=null;if(o.blockCommentStart&&o.blockCommentContinue){var c=m.string.indexOf(o.blockCommentEnd);var u=n.getRange(e.Pos(f.line,0),e.Pos(f.line,m.end)),d;if(c!=-1&&c==m.string.length-o.blockCommentEnd.length&&f.ch>=c){}else if(m.string.indexOf(o.blockCommentStart)==0){a=u.slice(0,m.start);if(!/^\s*$/.test(a)){a="";for(var C=0;C<m.start;++C)a+=" "}}else if((d=u.indexOf(o.blockCommentContinue))!=-1&&d+o.blockCommentContinue.length>m.start&&/^\s*$/.test(u.slice(0,d))){a=u.slice(0,d)}if(a!=null)a+=o.blockCommentContinue}if(a==null&&o.lineComment&&i(n)){var g=n.getLine(f.line),d=g.indexOf(o.lineComment);if(d>-1){a=g.slice(0,d);if(/\S/.test(a))a=null;else a+=o.lineComment+g.slice(d+o.lineComment.length).match(/^\s*/)[0]}}if(a==null)return e.Pass;r[l]="\n"+a}n.operation(function(){for(var e=t.length-1;e>=0;e--)n.replaceRange(r[e],t[e].from(),t[e].to(),"+insert")})}function i(e){var n=e.getOption("continueComments");if(n&&typeof n=="object")return n.continueLineComment!==false;return true}e.defineOption("continueComments",null,function(n,t,i){if(i&&i!=e.Init)n.removeKeyMap("continueComment");if(t){var r="Enter";if(typeof t=="string")r=t;else if(typeof t=="object"&&t.key)r=t.key;var l={name:"continueComment"};l[r]=o;n.addKeyMap(l)}})});